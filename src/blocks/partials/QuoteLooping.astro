---
// @blocks/partials/QuoteLooping.astro

import Icon from '@atoms/Icon.astro'

interface Props extends HTMLAttributes {
	tag?: keyof HTMLElementTagNameMap
	pulls: string[]
	duration?: number
	class?: string
}

const {
	tag: QuoteLooping = 'aside',
	pulls = [],
	duration = 1000,
	class: classes,
	...attrs
} = Astro.props as Props

const first = pulls?.[0] ?? ''
---

<QuoteLooping
	data-pbl-quote-looping
	data-pbl-quote-looping-pulls={JSON.stringify(pulls)}
	data-pbl-quote-looping-duration={String(duration)}
	{...attrs}
	class:list={['rotate-[-5deg] origin-top-left md:-translate-y-4', classes]}>
	<blockquote
		data-pbl-quote-looping-text
		class:list={[
			'text-[1.35rem] leading-tight font-script text-(--primary-fixed) max-w-[50ch] mx-auto',
			'line-clamp-3 h-20 overflow-clip',
		]}>
		{first}
	</blockquote>
	<div class='flex justify-center pt-2 -ml-4.5'>
		<Icon
			data-pbl-quote-looping-pulser
			name='pulser'
			class='size-2 text-(--primary-fixed)'
		/>
	</div>
</QuoteLooping>
